<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kallu The Shit - Up!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h2>üí© <b>Kallu The Shit - Up!</b></h2>

<!-- LEVEL SELECTION -->
<div id="level-select">
    <h3>Select Level</h3>
    <button id="level1Btn">Play Level 1</button>
    <button id="level2Btn">Play Level 2</button>
    <button id="level3Btn">Play Level 3</button>
    <button id="level4Btn">Play Level 4</button>
</div>

<div class="stats-container">
    <div class="stat-item">
        Score: <span id="score">0</span>
    </div>
    <div class="stat-item">
        Lives: <span id="livesDisplay">‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è</span>
    </div>
    <div class="stat-item">
        Health:
        <div class="health-bar-container">
            <div class="health-bar" id="healthBar" style="width: 100%;"></div>
            <span class="health-text">100%</span>
        </div>
    </div>
    <div class="stat-item">
        Time: <span id="timerDisplay" style="display: none;">Time: 60s</span>
    </div>
</div>

<div id="game-area">
    <!-- Floating debris and environmental elements -->
    <div id="floating-trash-1" class="floating-object trash" style="width: 30px; height: 30px; top: 40px; left: 200px; background-color: #8B4513;"></div>
    <div id="floating-trash-2" class="floating-object bottle" style="width: 15px; height: 35px; top: 150px; left: 500px; background-color: rgba(0, 100, 0, 0.5); border: 1px solid #006400;"></div>
    <div id="floating-trash-3" class="floating-object plank" style="width: 40px; height: 8px; top: 90px; left: 700px; background-color: #D2B48C;"></div>

    <!-- Animated water particles -->
    <div id="water-particles"></div>

    <div id="boatContainer">
        <img id="boat" src="assets/boat.png">
        <img id="player" src="assets/player.jpg">
    </div>
    <img id="food" src="assets/food.jpg">
    <img id="shark" src="assets/shark.png" style="display:none;">
</div>

<h2 id="finalMessage"></h2>
<h3 id="levelMsg"></h3>

<div id="crows"></div>

<button id="refreshBtn" style="display:none;">Refresh / Play Again</button>

<!-- background music -->
<audio id="bgMusic" src="assets/background.mp3" loop></audio>

<!-- Sound effects - using Web Audio API fallback since we don't have specific sound files -->
<script>
    // Sound effects using Web Audio API
    let audioContext = null;

    function initAudio() {
        try {
            window.AudioContext = window.AudioContext || window.webkitAudioContext;
            audioContext = new AudioContext();
        } catch (e) {
            console.log("Web Audio API not supported in this browser");
        }
    }

    // Play sound effect
    function playSound(type) {
        if (!audioContext) return;

        // Create audio context on first interaction (required by some browsers)
        if (audioContext.state === 'suspended') {
            audioContext.resume();
        }

        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        switch(type) {
            case 'collect':
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.3);
                break;

            case 'powerup':
                oscillator.type = 'square';
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime); // G5
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.5);
                break;

            case 'hit':
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(110, audioContext.currentTime); // A2
                gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.2);
                break;

            case 'win':
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.2); // E5
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.4); // G5
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.6);

                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.6);
                break;

            case 'lose':
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(220, audioContext.currentTime); // A3
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                oscillator.frequency.setValueAtTime(110, audioContext.currentTime + 0.2); // A2
                oscillator.frequency.setValueAtTime(55, audioContext.currentTime + 0.4); // A1
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.6);

                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.6);
                break;
        }
    }

    // Initialize audio on first user interaction
    document.addEventListener('click', initAudio, { once: true });
    document.addEventListener('keydown', initAudio, { once: true });
</script>

<script src="script.js"></script>
</body>
</html>
